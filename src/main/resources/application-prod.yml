spring:
  application:
    name: guno-data-import

  # Production Database Configuration
  datasource:
    url: jdbc:postgresql://${DB_HOST:160.25.81.22}:${DB_PORT:5432}/${DB_NAME:guno_db_test}?useSSL=false
    username: ${DB_USERNAME:guno_user}
    password: ${DB_PASSWORD:UYUgjL80moKrc6WTDLbg}
    driver-class-name: org.postgresql.Driver

    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  jackson:
    time-zone: Asia/Ho_Chi_Minh
    date-format: yyyy-MM-dd HH:mm:ss

  task:
    scheduling:
      enabled: true
      pool:
        size: 5

# ================================
# PLATFORM CONFIGURATION
# ================================
platform:
  facebook:
    enabled: ${FACEBOOK_ENABLED:true}
  tiktok:
    enabled: ${TIKTOK_ENABLED:true}
  shopee:
    enabled: ${SHOPEE_ENABLED:false}

# ================================
# API CONFIGURATION
# ================================
api:
  facebook:
    base-url: ${FACEBOOK_API_URL:https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search}
    headers:
      Authorization: x-webhook-api-key
      X-API-Key: ${FACEBOOK_API_KEY}
    timeout-seconds: 300
    page-size: 1000
    max-retries: 3
    retry-delay-ms: 1000
    source: "facebook"
    filter-date: "update"

  tiktok:
    base-url: ${TIKTOK_API_URL:https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search}
    headers:
      Authorization: x-webhook-api-key
      X-API-Key: ${TIKTOK_API_KEY}
    timeout-seconds: 300
    page-size: 5000
    max-retries: 5
    retry-delay-ms: 1000
    source: "tiktok"
    filter-date: "update"

  shopee:
    base-url: ${SHOPEE_API_URL:https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search}
    headers:
      Authorization: x-webhook-api-key
      X-API-Key: ${SHOPEE_API_KEY}
    timeout-seconds: 300
    page-size: 5000
    max-retries: 3
    retry-delay-ms: 1000
    source: "shopee"
    filter-date: "update"

  common:
    connect-timeout-ms: 10000
    read-timeout-ms: 30000

# ================================
# PROCESSING CONFIGURATION
# ================================
processing:
  parallel:
    enabled: false
    thread-pool-size: 10
    timeout-minutes: 30

  batch:
    size: 1000
    enabled: true
    max-batch-size: 5000

  validation:
    enabled: true
    skip-invalid-records: false

  bulk-insert:
    preferred-method: COPY_FROM
    fallback-method: MULTI_VALUE
    copy-batch-size: 10000

# ================================
# SCHEDULER CONFIGURATION
# ================================
scheduler:
  import:
    enabled: true
    cron: 0 */5 * * * *
    use-parallel: false
    auto-start: true

# ================================
# LOGGING CONFIGURATION
# ================================
logging:
  level:
    com.guno.dataimport: INFO
    org.springframework.jdbc: WARN
    org.springframework.web.client: WARN
    org.springframework.scheduling: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/guno-data-import.log

# ================================
# MANAGEMENT ENDPOINTS
# ================================
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
  metrics:
    export:
      prometheus:
        enabled: true

# ================================
# SERVER CONFIGURATION
# ================================
server:
  port: ${SERVER_PORT:8088}
  compression:
    enabled: true
  tomcat:
    threads:
      max: 200
      min-spare: 10