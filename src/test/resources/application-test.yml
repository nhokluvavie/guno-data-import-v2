spring:
  application:
    name: guno-data-import-test

  # Test Database Configuration
  datasource:
    url: jdbc:postgresql://160.25.81.22:5432/guno_db_test?useSSL=false
    username: guno_user
    password: UYUgjL80moKrc6WTDLbg
    driver-class-name: org.postgresql.Driver

    hikari:
      maximum-pool-size: 20
      minimum-idle: 10
      connection-timeout: 30000
      idle-timeout: 300000
      max-lifetime: 900000

  jackson:
    time-zone: Asia/Ho_Chi_Minh
    date-format: yyyy-MM-dd HH:mm:ss

  task:
    scheduling:
      enabled: false
      pool:
        size: 2

# âœ… NEW: Date Range Configuration for Testing
test:
  data:
    # Single date mode (use when start-date = end-date)
    date: "2026-01-07"

    # âœ… NEW: Date range mode
    start-date: "2026-01-15"  # ðŸŽ¯ From date (inclusive)
    end-date: "2026-01-15"    # ðŸŽ¯ To date (inclusive)

    # Date range behavior
    use-date-range: true      # true = use range, false = use single date

    # Processing options
    delay-between-dates-ms: 1000  # Wait time between processing each date
    continue-on-error: true       # Continue to next date even if one fails

    # Summary reporting
    generate-summary: true        # Generate summary report after all dates
    log-per-date-summary: true    # Log summary for each date

# ================================
# PLATFORM CONFIGURATION - NEW!
# ================================
platform:
  facebook:
    enabled: false
  tiktok:
    enabled: false
  shopee:
    enabled: true

# Test API Configuration - Use unified date
api:
  facebook:
    base-url: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
    headers:
      Authorization: x-webhook-api-key
      X-API-Key: iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr
    timeout-seconds: 300
    page-size: 1000
    max-retries: 3
    retry-delay-ms: 1000
    default-date: ${test.data.date}  # âœ… Use unified date
    source: "facebook"
    filter-date: "insert"

  tiktok:
    base-url: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
    headers:
      Authorization: x-webhook-api-key
      X-API-Key: iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr
    timeout-seconds: 300
    page-size: 2000
    max-retries: 5
    retry-delay-ms: 1000
    default-date: ${test.data.date}  # âœ… Use unified date
    source: "tiktok"
    filter-date: "insert"

  shopee:
    base-url: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
    headers:
      Authorization: x-webhook-api-key
      X-API-Key: iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr
    timeout-seconds: 300
    page-size: 2000
    max-retries: 3
    retry-delay-ms: 1000
    default-date: ${test.data.date}  # âœ… Use unified date
    source: "shopee"
    filter-date: "insert"

  common:
    connect-timeout-ms: 10000
    read-timeout-ms: 30000

# Test Processing Configuration
processing:
  parallel:
    enabled: false
    thread-pool-size: 5
    timeout-minutes: 10

  batch:
    size: 1000
    enabled: true
    max-batch-size: 1000

  validation:
    enabled: true
    skip-invalid-records: false

  bulk-insert:
    preferred-method: COPY_FROM
    fallback-method: MULTI_VALUE
    copy-batch-size: 1000

# Scheduler Configuration
scheduler:
  import:
    enabled: false
    cron: "0 */5 * * * *"
    use-parallel: false
    auto-start: false

# Test Logging Configuration
logging:
  level:
    com.guno.dataimport: DEBUG
    org.springframework.jdbc: DEBUG
    org.springframework.web.client: DEBUG
    org.springframework.scheduling: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

# Management endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always